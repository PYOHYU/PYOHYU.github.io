---
title:  "3.4 Differential Kinematics in 3D (3)"
excerpt: 

categories:
  - Robot
tags:
  - [Robotics]

toc: true
toc_sticky: true
 
date: 2022-04-06
last_modified_at: 2022-04-06

use_math: true
published: true
---

<br>

***

### 3.4.1 Singular Value Decomposition

<br>

Jacobian matrix는 다음 세 행렬의 곱으로 나타낼 수 있다.

$$
\textbf{J}(\textbf{q}) = \textbf{U}\boldsymbol{\Sigma}\textbf{V}^T
$$

여기서 $\textbf{U} \in \mathbb{R}^{m \times m}$, $\textbf{V} \in \mathbb{R}^{n \times n}$은 orthogonal matrix이며,

$$
\boldsymbol{\Sigma} = \textrm{diag}(\sigma_1, \sigma_2, \cdots , \sigma_m) \\
\sigma_1 \geq \sigma_2 \geq \cdots \geq \sigma_n
$$

<br>

***

### 3.4.2 Velocity Ellipsoid in 3D

<br>

기본 내용은 2D일 때와 같다. Unit norm을 가지는 모든 joint velocity들의 set에서,

$$
\Vert \dot{\boldsymbol{\theta}} \Vert^2 = \dot{\boldsymbol{\theta}} \cdot \dot{\boldsymbol{\theta}} =  \dot{\boldsymbol{\theta}}^T\dot{\boldsymbol{\theta}} = 1 \\
\dot{\boldsymbol{\theta}} = \textbf{J}^{-1} \boldsymbol{\nu} \\
\boldsymbol{\nu}^T(\textbf{J}\textbf{J}^T)\boldsymbol{\nu} = 1
$$

이 방정식은 6D hyper ellipsoid equation이 된다.

<br>

Velocity ellipsoid는 어떤 정보를 줄까?

로봇은 longest axis direction(largest singular value)를 따라 가장 빠르게 움직이며, shortest axis direction(smallest singular value)를 따라 가장 천천히 움직인다.

Ellipsoid가 sphere이면, motion은 <span style="color:red">**isotropic**</span>하며 모든 방향에서 동일한 속도를 갖는다.

<br>

***

### 3.4.3 Manipulability

<br>

<span style="color:red">**Manipulability**</span>는 ellipsoid의 크기로 정의된다.

$$
m = \sqrt{\textrm{det}(\textbf{J}\textbf{J}^T)} = \sigma_1 \cdot \sigma_2 \cdots \sigma_m
$$

여기서 $\sigma_1, \sigma_2, \cdots , \sigma_m$은 Jacobian의 singular value.

<br>

Ellipsoid의 <span style="color:red">**condition number**</span>는 ellipsoid의 형태를 나타내는 수이다.

$$
\kappa = \frac{\sigma_1}{\sigma_m}, \qquad 1 \leq \kappa
$$

<br>

$m=1$이면 robot은 isotropic motion을 한다.
$m= \infty$이면 ellipsoid는 단순한 ellipse가 된다. 이 경우 Cartesian 방향의 motion이 불가능해진다.

<br>

***

### 3.4.4 Transforming Spatial Velocity

<br>

2D case에서 Jacobian을 통해 frame 사이의 velocity transformation을 진행했다. 3D에서도 예외는 아니다.

<p align="center"><img src="/assets/image/robotics/ch3/3.19.jpg" width="50%" height="50%" title="" alt="8p"><br/></p>

$$
\boldsymbol{\nu} = \begin{bmatrix}
v_x & v_y & v_z & \omega_x & \omega_y & \omega_z
\end{bmatrix}^T
$$

$$
{}^{B}\boldsymbol{\nu} = {}^{B}\textbf{J}_A {}^{A}\boldsymbol{\nu}
$$

$$
{}^{B}\textbf{J}_A({}^{B} \xi_A) = \begin{bmatrix}
{}^{B} \textbf{R}_A & \textbf{0}_{3 \times 3} \\
\textbf{0}_{3 \times 3} & {}^{B} \textbf{R}_A
\end{bmatrix}
$$

<br>

이제 world coordinate frame $\\{0 \\}$에서 spatial velocity는

$$
\begin{align*}
{}^{0}\boldsymbol{\nu} &= {}^{0}\textbf{J} \dot{\boldsymbol{\theta}} \\
{}^{6}\boldsymbol{\nu} &= {}^{6}\textbf{J} \dot{\boldsymbol{\theta}} \\
&= {}^{6}\textbf{J}_0({}^{6}\xi_0}){}^{0}\textbf{J}(\textbf{\theta})\dot{\boldsymbol{\theta}}
\end{align*}
$$

$$
{}^{6}\textbf{J}_0({}^{6} \xi_0) = \begin{bmatrix}
{}^{6} \textbf{R}_0 & \textbf{0}_{3 \times 3} \\
\textbf{0}_{3 \times 3} & {}^{6} \textbf{R}_0
\end{bmatrix}
$$

<br>

***

### 3.4.5 Euler Angles

<br>

지금까지 열심히 Jacobian으로 spatial velocity를 계산했는데, 생각해 보면 우리는 지금까지 각도를 Euler angle로도 표현해왔다.

Z-Y-Z Euler angle의 각도 변화율은?

